<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.heitian.ssm.dao.ProductAdDao">
	<resultMap type="com.heitian.ssm.model.ProductAd" id="productAd">
		<id column="id" property="id" jdbcType="BIGINT" />
		<result column="product_id" property="productId" jdbcType="BIGINT" />
		<result column="status" property="status" jdbcType="BIGINT" />
		<result column="rank" property="rank" jdbcType="BIGINT" />
		<result column="date" property="date" jdbcType="DATE" />
	</resultMap>

	<insert id="addProductAd" parameterType="map">
		INSERT INTO
		product_advertisement(product_id, status, rank, date)
		VALUE
		(#{productId}, 1, 0, #{date});
	</insert>


	<delete id="deleteProductAd" parameterType="java.lang.Long">
		DELETE FROM
		product_advertisement
		WHERE
		product_id=#{productId}
	</delete>


	<select id="showProductAd" resultMap="productAd">
		SELECT * FROM
		product_advertisement
		WHERE
		`status`=0
	</select>

	<select id="applyProductAd" resultMap="productAd">
		SELECT * FROM
		product_advertisement
		WHERE
		`status`=1
	</select>
	
	<update id="agreeProductAd" parameterType="java.lang.Long">
	  UPDATE product_advertisement
      SET `status`=0
      WHERE product_id=#{productId}
	</update>
	
	<update id="rejectProductAd" parameterType="java.lang.Long">
	  UPDATE product_advertisement
      SET `status`=2
      WHERE product_id=#{productId}
	</update>
</mapper>
